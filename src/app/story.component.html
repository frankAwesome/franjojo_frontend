<div class="story-panel">
  <h3 class="minecraft-title">{{ title }}</h3>
  <button class="minecraft-btn dialog-glow-btn" style="margin-bottom:1.2rem;" (click)="openDialogClient()">Try the dialog now</button>
  <p class="minecraft-desc">{{ description }}</p>
  <app-dialogclient *ngIf="showDialogClient" [story]="dialogStory" (closeDialog)="closeDialogClient()"></app-dialogclient>
  <div class="story-details">
    <div>
  <strong class="minecraft-section-heading">Characters:</strong>
      <ul class="character-list horizontal">
        <li *ngFor="let character of characters" class="character-item minecraft-character-frame">
          <img *ngIf="character.image" [src]="character.image" alt="{{ character.name }}" class="character-img large">
          <span>
            <span class="minecraft-character-name">{{ character.name }}</span>
            <div *ngIf="character.subtitle" class="character-role">{{ character.subtitle }}</div>
          </span>
        </li>
      </ul>
    </div>
    <div class="chapter-carousel-container">
  <strong class="minecraft-section-heading">Chapters:</strong>
      <div class="custom-carousel">
        <button class="carousel-arrow left" (click)="prevChapter()" [disabled]="currentChapterIndex === 0">&#9664;</button>
        <div class="chapter-card mx-auto">
          <div class="chapter-image-frame">
            <img *ngIf="chapters[currentChapterIndex]?.image" [src]="chapters[currentChapterIndex]?.image" class="card-img-top" alt="Chapter image" style="max-height:180px;object-fit:cover;">
          </div>
          <div class="chapter-title-block">
            <h5 class="minecraft-chapter-title">{{ chapters[currentChapterIndex]?.title || chapters[currentChapterIndex] }}</h5>
            <div class="chapter-number" style="font-family:'Press Start 2P',monospace;color:#3cfa00;font-size:0.95rem;margin:0.3rem 0 0.5rem 0;">
              Chapter {{ currentChapterIndex + 1 }}
            </div>
          </div>
          <div class="card-body">
            <p class="minecraft-chapter-description" *ngIf="chapters[currentChapterIndex]?.description">{{ chapters[currentChapterIndex]?.description }}</p>
            <div *ngIf="chapters[currentChapterIndex]?.milestones?.length" class="chapter-missions">
              <div class="minecraft-section-heading" style="margin-top:0.7rem; font-size:0.9rem; color:#3cfa00;">Missions:</div>
              <ul class="minecraft-mission-list">
                <li *ngFor="let milestone of chapters[currentChapterIndex]?.milestones | slice:0:3">
                  <span class="minecraft-mission-icon"></span>
                  <span class="minecraft-mission-text">{{ milestone.name }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <button class="carousel-arrow right" (click)="nextChapter()" [disabled]="currentChapterIndex === chapters.length - 1">&#9654;</button>
      </div>
      <div class="carousel-indicators">
        <span *ngFor="let chapter of chapters; let i = index" class="indicator-dot" [class.active]="i === currentChapterIndex" (click)="goToChapter(i)"></span>
      </div>
    </div>
  </div>
</div>
