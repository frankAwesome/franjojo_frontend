<div class="dialogclient-modal">
  <div class="dialogclient-content">
    <h3 class="minecraft-title">Dialog Client</h3>
    <form (ngSubmit)="submitDialog()" style="font-family:'Press Start 2P',monospace;color:#fff;">
      <div class="mb-2">
        <label>Protagonist:</label>
        <select [(ngModel)]="selectedProtagonistId" name="protagonist" required>
          <option *ngFor="let c of characters" [value]="c.id">{{c.name}}</option>
        </select>
      </div>
      <div class="mb-2">
        <label>NPC:</label>
        <select [(ngModel)]="selectedNpcId" name="npc" required>
          <option *ngFor="let c of characters" [value]="c.id">{{c.name}}</option>
        </select>
      </div>
      <div class="mb-2">
        <label>Chapter:</label>
        <select [(ngModel)]="selectedChapterId" name="chapter" (change)="onChapterChange()" required>
          <option *ngFor="let ch of chapters" [value]="ch.id">{{ch.title}}</option>
        </select>
      </div>
      <div class="mb-2">
        <label>Milestones:</label>
        <div *ngFor="let m of milestones">
          <input type="checkbox" [(ngModel)]="selectedMilestones[m.id]" name="milestone{{m.id}}" /> {{m.name}}
        </div>
      </div>
      <div class="mb-2">
        <label>Dialog Text:</label>
        <textarea [(ngModel)]="dialogText" name="dialogText" rows="2" style="width:100%"></textarea>
      </div>
      <button class="minecraft-btn" type="submit">Send Dialog</button>
      <button class="minecraft-btn" type="button" (click)="$event.stopPropagation(); closeDialog.emit()">Close</button>
      <div *ngIf="error" style="color:#ff5555;">{{error}}</div>
      <div *ngIf="response" style="color:#3cfa00;">Response: {{response | json}}</div>
    </form>
  </div>
</div>
